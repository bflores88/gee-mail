<html>

<head>
	<script src="js/mail-generator.js"></script>
	<link href="css/style.css" rel="stylesheet" media="screen">
	<title>Gee-mail!</title>
	<link href="https://fonts.googleapis.com/css?family=Fahkwang|Quicksand" rel="stylesheet">
	<script>
		window.onload = function () {
			// ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
			// We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser

			//Header content

			geeMail.innerHTML = 'Gee-Mail';


			//Set interval for mail to add

			// idk what i'm doing




			//Declare variable for mails

			var mailArray = window.geemails

			//Sort the contents in the mail array by date from newest to oldest because why not cuz

			mailArray.sort(function (a, b) {
				var dateA = new Date(a.date),
					dateB = new Date(b.date);
				return dateA - dateB;
			});

			//For loop to consume data and such

			var totalMessages = 0;
			totalMessages = mailArray.length;
			console.log(totalMessages);


			for (var i = 0; i < mailArray.length; i++) {

				var messageBox = document.createElement('div');
				messageBox.className = 'messages';
				main.appendChild(messageBox);

				var fromDate = document.createElement('div');
				fromDate.className = 'fromDate';
				messageBox.appendChild(fromDate);

				var mailFrom = document.createElement('div');
				mailFrom.className = 'sender';
				mailFrom.innerHTML = 'From: ' + mailArray[i].sender;
				fromDate.appendChild(mailFrom);

				var mailDate = document.createElement('div');
				mailDate.className = 'date';
				mailDate.innerHTML = mailArray[i].date;
				fromDate.appendChild(mailDate);

				var mailSubject = document.createElement('div');
				mailSubject.className = 'subject';
				mailSubject.innerHTML = 'Subject: ' + mailArray[i].subject;
				messageBox.appendChild(mailSubject);

				var mailBody = document.createElement('div');
				mailBody.className = 'mailBody';
				mailBody.innerHTML = mailArray[i].body;
				mailSubject.appendChild(mailBody);


			}

			//Adds event listener to the messages box that will show the message content upon clicking.

			var subjectArray = document.getElementsByClassName('messages');

			for (var i = 0; i < subjectArray.length; i++) {
				subjectArray[i].addEventListener('click', showMessage);
			}

			function showMessage() {

				var showMess = this.querySelectorAll('.mailBody')[0];
				if (showMess.style.display === 'none') {
					showMess.style.display = 'block';
					this.style.fontWeight = 'normal';
				} else {
					showMess.style.display = 'none';
				}

			}

			//Content for sidecount container

			ttlmess.innerHTML = totalMessages

			

			console.log(window.geemails);








		};
	</script>
</head>

<body>
	<header id="header">
		<h1 id='geeMail'></h1>
	</header>

	<div class="container" id="maincontainer">

		<div class="container" id="sidecount">
			<h2 id="inboxttl">INBOX</h2>

			<div class="statbox">
					<p class="status">Total Messages</p>
					<p class="statcount" id="ttlmess"></p>
			</div>

			<div class="statbox">
					<p class="status">Unread</p>
					<p class="statcount" id="unread"></p>
			</div>

			<div class="statbox">
					<p class="status">Read</p>
					<p class="statcount" id="read"></p>
			</div>


		</div>

		<div class="container" id="main"></div>

</div>
</body>

</html>